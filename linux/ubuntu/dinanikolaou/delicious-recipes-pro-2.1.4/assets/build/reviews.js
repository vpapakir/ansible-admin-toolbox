!function(){"use strict";var e={n:function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,{a:a}),a},d:function(t,a){for(var c in a)e.o(a,c)&&!e.o(t,c)&&Object.defineProperty(t,c,{enumerable:!0,get:a[c]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t=window.wp.element,a=window.wp.i18n,c=window.wp.apiFetch,n=e.n(c),r=window.wp.url;const l={per_page:-1,orderby:"date",order:"desc",status:"all",type:"all"},s={per_page:-1,orderby:"date",order:"desc",status:"spam",type:"all"},o={per_page:-1,orderby:"date",order:"desc",status:"trash",type:"all"},{userID:m,allRecipes:i,globalSettings:p}=DeliciousRecipesReviews;var u=()=>{const[e,c]=(0,t.useState)(null),[u,d]=(0,t.useState)(null),[h,_]=(0,t.useState)("all"),[E,R]=(0,t.useState)("all");(0,t.useEffect)((()=>{f(),setTimeout((()=>{v(jQuery)}),4e3)}),[]);const v=e=>{e(document).find(".dr-comment-form-rating").each((function(){e(this).rateYo({fullStar:!0,onChange:function(t,a){e(this).parent().find('input[name="rating"]').val(t)}})}))};(0,t.useEffect)((()=>{setTimeout((()=>{v(jQuery)}),4e3)}),[h]),(0,t.useEffect)((()=>{setTimeout((()=>{v(jQuery)}),4e3)}),[E]);const f=()=>{n()({path:(0,r.addQueryArgs)("/wp/v2/comments",l),method:"GET"}).then((e=>{let t=e?.filter((e=>"recipe"===e._links?.up?.[0]?.post_type))?.map((e=>{let t=new Date(e.date).toString();return{id:e.id,content:e.content.rendered,author:e.author,gravatar:e.author_avatar_urls,author_name:e.author_name,author_url:e.author_url,type:e.type,post:e.post,link:e.link,date:t,status:e.status,rating:e.meta.rating}}));d(t),c(t)})).catch((e=>{console.log(e)}))},g=e=>{let t;"all"===e&&(t=u,_("all")),"hold"===e&&(t=u.filter((e=>"hold"==e?.status)),_("hold")),"approved"===e&&(t=u.filter((e=>"approved"==e?.status)),_("approved")),"spam"===e&&(t=void n()({path:(0,r.addQueryArgs)("/wp/v2/comments",s),method:"GET"}).then((e=>{let t=e?.filter((e=>"recipe"===e._links?.up?.[0]?.post_type))?.map((e=>{let t=new Date(e.date).toString();return{id:e.id,content:e.content.rendered,author:e.author,gravatar:e.author_avatar_urls,author_name:e.author_name,author_url:e.author_url,type:e.type,post:e.post,link:e.link,date:t,status:e.status,rating:e.meta.rating}}));c(t)})).catch((e=>{console.log(e)})),_("spam")),"trash"===e&&(t=void n()({path:(0,r.addQueryArgs)("/wp/v2/comments",o),method:"GET"}).then((e=>{let t=e?.filter((e=>"recipe"===e._links?.up?.[0]?.post_type))?.map((e=>{let t=new Date(e.date).toString();return{id:e.id,content:e.content.rendered,author:e.author,gravatar:e.author_avatar_urls,author_name:e.author_name,author_url:e.author_url,type:e.type,post:e.post,link:e.link,date:t,status:e.status,rating:e.meta.rating}}));c(t)})).catch((e=>{console.log(e)})),_("trash")),"mine"===e&&(t=u.filter((e=>e.author===parseInt(m))),_("mine")),c(t)};return React.createElement("div",{id:"dr-reviews-page-wrapper"},e?React.createElement(React.Fragment,null,React.createElement("ul",{className:"subsubsub"},React.createElement("li",{className:"all"},React.createElement("a",{className:"all"===h?"current":"","aria-current":"page",onClick:()=>g("all")},(0,a.__)("All","delicious-recipes-pro")," ",React.createElement("span",{className:"count"},"(",u?.length,")")),"| "),React.createElement("li",{className:"mine"},React.createElement("a",{onClick:()=>g("mine"),className:"mine"===h?"current":""},(0,a.__)("Mine","delicious-recipes-pro")," ",React.createElement("span",{className:"count"},"(",u?.filter((e=>e.author===parseInt(m))).length,")")),"| "),React.createElement("li",{className:"pending"},React.createElement("a",{onClick:()=>g("hold"),className:"hold"===h?"current":""},(0,a.__)("Pending","delicious-recipes-pro")," ",React.createElement("span",{className:"count"},"(",u?.filter((e=>"hold"===e.status)).length,")")),"| "),React.createElement("li",{className:"approved"},React.createElement("a",{onClick:()=>g("approved"),className:"approved"===h?"current":""},(0,a.__)("Approved","delicious-recipes-pro")," ",React.createElement("span",{className:"count"},"(",u?.filter((e=>"approved"===e.status)).length,")")),"| "),React.createElement("li",{className:"spam"},React.createElement("a",{onClick:()=>g("spam"),className:"spam"===h?"current":""},(0,a.__)("Spam","delicious-recipes-pro")," ","spam"===h?React.createElement("span",{className:"count"},"(",e.length,")"):""),"| "),React.createElement("li",{className:"trash"},React.createElement("a",{onClick:()=>g("trash"),className:"trash"===h?"current":""},(0,a.__)("Trash","delicious-recipes-pro")," ","trash"===h?React.createElement("span",{className:"count"},"(",e.length,")"):""))),React.createElement("div",{className:"tablenav top"},React.createElement("div",{className:"alignleft actions"},React.createElement("label",{className:"screen-reader-text",htmlFor:"filter-by-comment-type"},(0,a.__)("Filter by comment type","delicious-recipes-pro")),React.createElement("select",{id:"filter-by-comment-type",name:"comment_type",onChange:e=>(e=>{let t;"all"===e&&(t=u,R("all")),"comment"===e&&(t=u.filter((e=>"comment"==e?.type)),R("comment")),"question"===e&&(t=u.filter((e=>"question"==e?.type)),R("question")),_("all"),c(t)})(e.currentTarget.value)},React.createElement("option",{value:"all"},(0,a.__)("All comment types","delicious-recipes-pro")),React.createElement("option",{value:"comment"},(0,a.__)("Reviews","delicious-recipes-pro")),React.createElement("option",{value:"question"},(0,a.__)("Questions","delicious-recipes-pro"))))),React.createElement("table",{className:"wp-list-table widefat fixed striped table-view-list comments"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("td",{id:"cb",className:"manage-column column-cb check-column"},React.createElement("label",{className:"screen-reader-text",htmlFor:"cb-select-all-1"},(0,a.__)("Select All","delicious-recipes-pro")),React.createElement("input",{id:"cb-select-all-1",type:"checkbox"})),React.createElement("th",{scope:"col",id:"author",className:"manage-column column-author"},React.createElement("span",null,(0,a.__)("Author","delicious-recipes-pro"))),React.createElement("th",{scope:"col",id:"comment",className:"manage-column column-comment column-primary"},React.createElement("span",null,(0,a.__)("Comment","delicious-recipes-pro"))),React.createElement("th",{scope:"col",id:"response",className:"manage-column column-response"},React.createElement("span",null,(0,a.__)("In response to","delicious-recipes-pro"))),React.createElement("th",{scope:"col",id:"date",className:"manage-column column-date"},React.createElement("span",null,(0,a.__)("Submitted on","delicious-recipes-pro"))))),React.createElement("tbody",{id:"the-comment-list","data-wp-lists":"list:comment"},e?.map(((e,t)=>React.createElement("tr",{key:t,id:`comment-${e.id}`,className:`question byuser bypostauthor even thread-even depth-1 ${e.status}`},React.createElement("th",{scope:"row",className:"check-column"},React.createElement("label",{className:"screen-reader-text",htmlFor:`cb-select-${e.id}`},(0,a.__)("Select comment","delicious-recipes-pro")),React.createElement("input",{id:`cb-select-${e.id}`,type:"checkbox",name:"delete_comments[]",value:e.id})),React.createElement("td",{className:"author column-author","data-colname":"Author"},e.gravatar?React.createElement("strong",null,React.createElement("img",{alt:"",src:e.gravatar[24],className:"avatar avatar-32 photo",height:"32",width:"32",loading:"lazy"}),e.author_name):React.createElement("strong",null,e.author_name),React.createElement("a",{href:e.author_url},e.author_url),p.enableRatings[0]&&"yes"===p.enableRatings[0]&&e?.rating>0&&React.createElement("div",{className:"dr-star-ratings-wrapper"},React.createElement("div",{className:"dr-star-ratings"},React.createElement("div",{"data-rateyo-read-only":"true","data-rateyo-rating":e.rating,className:"dr-comment-form-rating"})))),React.createElement("td",{className:"comment column-comment has-row-actions column-primary","data-colname":"Comment"},React.createElement("p",{dangerouslySetInnerHTML:{__html:e.content}}),i?.filter((t=>e.post===t.id))?.map(((t,c)=>React.createElement("div",{className:"row-actions",key:c},e.status&&"approved"==e.status?React.createElement("span",{className:"unapprove"},React.createElement("a",{href:`comment.php?c=${e.id}&action=unapprovecomment&${t.comments?.find((t=>t.commentid==e.id))?.approve_nonce}`,className:"vim-a aria-button-if-js","aria-label":"Unapprove this comment",role:"button"},(0,a.__)("Unapprove","delicious-recipes-pro"))):React.createElement("span",{className:"approve"},React.createElement("a",{href:`comment.php?c=${e.id}&action=approvecomment&${t.comments?.find((t=>t.commentid==e.id))?.approve_nonce}`,className:"vim-a aria-button-if-js","aria-label":"Approve this comment",role:"button"},(0,a.__)("Approve","delicious-recipes-pro"))),React.createElement("span",{className:"edit"}," |",React.createElement("a",{href:`comment.php?action=editcomment&c=${e.id}`,"aria-label":"Edit this comment"},(0,a.__)("Edit","delicious-recipes-pro"))),e.status&&"spam"==e.status?React.createElement("span",{className:"unspam"}," |",React.createElement("a",{href:`comment.php?c=${e.id}&action=unspamcomment&${t.comments?.find((t=>t.commentid==e.id))?.delete_nonce}`,className:"vim-s vim-destructive aria-button-if-js","aria-label":"Restore this comment from the spam",role:"button"},(0,a.__)("Not Spam","delicious-recipes-pro"))):React.createElement("span",{className:"spam"}," |",React.createElement("a",{href:`comment.php?c=${e.id}&action=spamcomment&${t.comments?.find((t=>t.commentid==e.id))?.delete_nonce}`,className:"vim-s vim-destructive aria-button-if-js","aria-label":"Mark this comment as spam",role:"button"},(0,a.__)("Spam","delicious-recipes-pro"))),React.createElement("span",{className:"trash"}," |",React.createElement("a",{href:`comment.php?c=${e.id}&action=trashcomment&${t.comments?.find((t=>t.commentid==e.id))?.delete_nonce}`,className:"delete vim-d vim-destructive aria-button-if-js","aria-label":"Move this comment to the Trash",role:"button"},(0,a.__)("Trash","delicious-recipes-pro"))))))),React.createElement("td",{className:"response column-response","data-colname":"In response to"},i?.filter((t=>e.post===t.id))?.map(((e,t)=>React.createElement("div",{className:"response-links",key:t},React.createElement("a",{href:e.permalink,className:"comments-edit-item-link"},e.title),React.createElement("a",{href:e.permalink,className:"comments-view-item-link"},(0,a.__)("View Recipe","delicious-recipes-pro")))))),React.createElement("td",{className:"date column-date","data-colname":"Submitted on"},React.createElement("div",{className:"submitted-on"},React.createElement("a",{href:e.link},e.date))))))))):React.createElement("div",{className:"dr-form__desc"},React.createElement("div",{id:"loader"})))};!function(e){let a=document.getElementById("dr_recipe_reviews");e(document).ready((function(){null!==a&&(0,t.render)(React.createElement(u,null),a)}))}(jQuery)}();